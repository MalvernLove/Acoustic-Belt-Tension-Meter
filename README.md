# 音波式皮带张力计（Web版）

基于**皮带固有振动频率**的音波式张力测量工具，使用浏览器麦克风采集声音，通过频谱分析计算皮带张力，并自动识别稳定振动区间，仅对稳定段进行统计，接近商用音波张力计的工作逻辑。

---

## 一、原理概述

当对张紧在两滑轮之间的皮带施加瞬时冲击时，皮带会产生振动：

* 初始阶段：
  含冲击成分和高阶模态，振动不规则
* 稳定阶段：
  进入一阶固有振动，频率稳定
* 衰减阶段：
  振幅逐渐减小

本工具通过**实时频谱分析+稳定段自动识别**，提取皮带的一阶固有频率，并根据物理模型计算张力。

---

## 二、张力计算公式（Gates型）

$` T = 4 \times M \times W \times S^2 \times f^2 \times 10^{-9} `$

| 符号 | 含义               |
| -- | ---------------- |
| T  | 张力（N）            |
| M  | 单位质量（g / m / mm） |
| W  | 皮带宽度（mm）         |
| S  | 跨距（mm）           |
| f  | 一阶固有振动频率（Hz）     |

说明：

* 该形式与日本Gates等音波式张力计的工程公式一致
* $`10^{-9}`$来自单位换算（g→kg，mm→m）

---

## 三、主要功能

* 🎤 浏览器麦克风采集
* 📈 实时张力–时间曲线
* 🧮 自动计算张力
* 🎯 稳定段自动识别
  * 剔除冲击瞬态
  * 仅对稳定振动区统计
* 📊 输出稳定段：
  * 平均值
  * 最大值
  * 最小值
* ⏱ 精确倒计时
* 🌗 黑暗模式
  * 自动跟随操作系统
  * 可手动覆盖
* 🌍 多语言界面
  * 简体中文
  * 繁體中文
  * English
  * 日本語

---

## 四、稳定段自动识别逻辑

稳定段判定基于**滑动窗口统计**：

* 窗口长度：200ms
* 稳定判据：$` \frac{\sigma}{\mu} < 5% `$
* 最短稳定持续时间：500ms

流程：

1. 对张力序列进行滑动窗口分析
2. 连续满足稳定判据 → 进入稳定段
3. 测量结束后：

   * 若检测到稳定段 → 仅对稳定段统计
   * 否则 → 使用全数据作为兜底


---

## 五、使用方法

### 1. 本地运行

在当前目录下，
```bash
python -m http.server 8000
```
浏览器访问http://localhost:8000

或使用[Live Server](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer)。

> ⚠️ 必须使用 HTTP 访问，`file://` 无法调用麦克风。

---

### 2. 测量步骤

1. 输入：
   * 单位质量 M
   * 皮带宽度 W
   * 跨距 S
2. 点击 **开始测量**
3. 在3秒内：
   * 用手指、工具轻敲皮带
   * 避免持续噪声或说话
4. 测量结束后：
   * 查看张力曲线
   * 读取稳定段统计值

---

## 六、结果判读建议

* 曲线前段波动大、后段平稳：
  → 正常（冲击 + 稳态）
* 稳定段较长、曲线平直：
  → 测量可靠
* 曲线全程跳变剧烈：
  → 敲击不当或环境干扰，建议重测

---

## 七、浏览器兼容性

兼容Chrome、Edge、Firefox、Safari等浏览器。

---

## 八、适用范围与限制

### 适用：

* 同步带、V带、平皮带
* 张紧跨度清晰、边界近似固定的工况

### 不适用/注意：

* 极短跨距
* 强阻尼结构
* 多振动源叠加
* 非稳态连续激励

本工具为**工程辅助测量**，非法定计量仪器。

---

## 九、项目定位

这是一个：

* 不依赖后端
* 不依赖第三方库
* 算法透明
* 易于审查与二次开发

的 **工程级 Web 张力测量原型**，可用于：

* 快速现场评估
* 算法验证
* 教学演示
* 商用仪表原型开发

---

## 十、许可与免责声明

* 本项目仅供学习与工程参考
* 测量结果需结合实际工况判断
* 使用风险由使用者自行承担
